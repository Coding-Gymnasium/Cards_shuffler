<script src="https://code.jquery.com/jquery-3.5.0.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
<h1>Discover The Capital Cities Of The World</h1>
<div id='featuredCard'>
  <% featured_card = @cards.shuffle.first %>
        <figure>
          <%= image_tag(featured_card.flag, :size => '250x150') %>
          <figcaption>
            <h3><%= featured_card.capital %></h3>
            <ul>
              <li>Capital Of: <%= featured_card.name %></li>
              <li>Population: <%= featured_card.population %> </li>
              <li>Currency: <%= featured_card.currencies %> </li>
              <li>Languages: <%= featured_card.languages %> </li>
              <li>Date & Time: <%= featured_card.timezones %> </li>
            </ul>

            <%= link_to 'Details', card_path(featured_card), method: :get %>
          </figcaption>
        </figure>
 </div>

<button type='button' id='shuffle'>Shuffle</button>

<div id='cards'>

  <% @cards.each do |card| %>
      <div class='card' id='card' onClick="onClick(this)">
        <figure>
          <%= image_tag(card.flag, :size => '150x100') %>
          <figcaption>
            <h3><%= card.capital %></h3>
            <ul>
              <li>Capital Of: <%= card.name %></li>
              <li>Population: <%= card.population %> </li>
              <li>Currency: <%= card.currencies %> </li>
              <li>Languages: <%= card.languages %></li>
              <li>Date & Time: <%= card.timezones %> </li>
            </ul>
            <%= link_to 'Details', card_path(card), method: :get %>
          </figcaption>
        </figure>
      </div>
  <% end %>
</div>

<script>
  function onClick(card) {
    document.getElementById('featuredCard').replaceChildren(card.cloneNode(true))
    var mapImage = document.getElementById('featuredCard').getElementsByTagName('img')[0]
    mapImage.style.height = '30%'
    mapImage.style.width = '30%'
  }
</script>

